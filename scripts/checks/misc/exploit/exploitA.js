import * as Minecraft from "@minecraft/server";
import config from "../../../data/config.js";
import { flag } from "../../../util";

/**
 * Checks for being below the possible y-Level. (y < -104)
 * @param {Minecraft.Player} player - The player to check.
 */
export function exploitA(player) {
    
    if (!config.modules.exploitA.enabled) return;

    if (player.location.y < -104) {

        flag(player, "Exploit", "A", "yPos", player.location.y);

        // Define the backup location to teleport the player to
        const location = {
            x: player.location.x,
            y: -104,
            z: player.location.z
        }

        // Prevent the player from entering the impossible location
        player.teleport(
            location,
            {
                checkForBlocks: false,
                dimension: player.dimension,
                facingLocation: player.getViewDirection(),
                keepVelocity: false,
                rotation: {x: player.getRotation().x, y: player.getRotation().y}
            }
        );
    }
}